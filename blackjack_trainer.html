<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Blackjack - Conteo Hi-Lo</title>
    <style>
        /* Estilos b√°sicos para evitar el archivo muy largo */
        body { font-family: Arial, sans-serif; background: #0f3460; color: white; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: #ffd700; }
        .version-indicator { background: #4CAF50; color: white; padding: 10px; border-radius: 5px; margin: 10px 0; text-align: center; }
        .game-area { background: rgba(0,0,0,0.2); padding: 20px; border-radius: 15px; }
        .table { background: #0d4f1c; border: 12px solid #8B4513; border-radius: 50%; padding: 80px; margin: 20px 0; position: relative; min-height: 600px; }
        .dealer-area { text-align: center; margin: 20px 0; }
        .player-area { text-align: center; margin: 20px 0; }
        .cards { display: flex; gap: 8px; justify-content: center; margin: 10px 0; }
        .card { width: 70px; height: 100px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: bold; background: white; color: black; border: 2px solid #333; }
        .game-actions { text-align: center; margin: 20px 0; }
        button { padding: 12px 24px; margin: 5px; background: #ff6b35; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        button:hover { background: #ff8e53; }
        button:disabled { opacity: 0.6; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üÉè Simulador de Blackjack - Conteo Hi-Lo üÉè</h1>
            <div class="version-indicator">‚úÖ Versi√≥n 2024 - Botones Actualizados</div>
        </div>
        
        <div class="game-area">
            <div class="table">
                <div class="dealer-area">
                    <h3>Dealer</h3>
                    <div id="dealer-cards" class="cards"></div>
                    <div id="dealer-value" class="hand-value"></div>
                </div>
                
                <div class="player-area">
                    <h3>Jugador</h3>
                    <div id="player-cards" class="cards"></div>
                    <div id="player-value" class="hand-value"></div>
                </div>
            </div>
            
            <div class="game-actions">
                <button id="deal-btn" onclick="dealCards()">Repartir</button>
                <button id="hit-btn" onclick="hit()" disabled>Pedir</button>
                <button id="stand-btn" onclick="stand()" disabled>Plantarse</button>
                <button id="double-btn" onclick="doubleDown()" disabled>Doblar</button>
            </div>
            
            <div id="game-message" style="text-align: center; margin: 20px 0; font-size: 1.2em; color: #ffd700;"></div>
        </div>
    </div>
    
    <script>
        // Juego b√°sico de Blackjack
        let deck = [];
        let playerCards = [];
        let dealerCards = [];
        let gameActive = false;
        
        // Crear baraja
        function createDeck() {
            const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            deck = [];
            
            for (let suit of suits) {
                for (let value of values) {
                    deck.push({ suit, value });
                }
            }
            
            // Mezclar baraja
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }
        
        // Obtener valor de carta
        function getCardValue(card) {
            if (card.value === 'A') return 11;
            if (['J', 'Q', 'K'].includes(card.value)) return 10;
            return parseInt(card.value);
        }
        
        // Calcular valor de mano
        function calculateHandValue(cards) {
            let value = 0;
            let aces = 0;
            
            for (let card of cards) {
                if (card.value === 'A') {
                    aces++;
                    value += 11;
                } else if (['J', 'Q', 'K'].includes(card.value)) {
                    value += 10;
                } else {
                    value += parseInt(card.value);
                }
            }
            
            // Ajustar ases
            while (value > 21 && aces > 0) {
                value -= 10;
                aces--;
            }
            
            return value;
        }
        
        // Mostrar cartas
        function displayCards(cards, elementId, hideFirst = false) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                
                if (hideFirst && index === 0) {
                    cardElement.textContent = '?';
                    cardElement.style.background = '#4169e1';
                    cardElement.style.color = 'white';
                } else {
                    cardElement.textContent = card.value + card.suit;
                    if (card.suit === '‚ô•' || card.suit === '‚ô¶') {
                        cardElement.style.color = '#dc143c';
                    }
                }
                
                element.appendChild(cardElement);
            });
        }
        
        // Repartir cartas
        function dealCards() {
            createDeck();
            playerCards = [];
            dealerCards = [];
            gameActive = true;
            
            // Repartir 2 cartas a cada uno
            playerCards.push(deck.pop());
            dealerCards.push(deck.pop());
            playerCards.push(deck.pop());
            dealerCards.push(deck.pop());
            
            displayCards(playerCards, 'player-cards');
            displayCards(dealerCards, 'dealer-cards', true);
            
            document.getElementById('player-value').textContent = 'Valor: ' + calculateHandValue(playerCards);
            document.getElementById('dealer-value').textContent = 'Valor: ?';
            
            // Activar botones
            document.getElementById('deal-btn').disabled = true;
            document.getElementById('hit-btn').disabled = false;
            document.getElementById('stand-btn').disabled = false;
            document.getElementById('double-btn').disabled = false;
            
            document.getElementById('game-message').textContent = '';
            
            // Verificar blackjack
            if (calculateHandValue(playerCards) === 21) {
                stand();
            }
        }
        
        // Pedir carta
        function hit() {
            if (!gameActive) return;
            
            playerCards.push(deck.pop());
            displayCards(playerCards, 'player-cards');
            
            const playerValue = calculateHandValue(playerCards);
            document.getElementById('player-value').textContent = 'Valor: ' + playerValue;
            
            if (playerValue > 21) {
                endGame('¬°Te pasaste! Dealer gana.');
            } else if (playerValue === 21) {
                stand();
            }
            
            document.getElementById('double-btn').disabled = true;
        }
        
        // Plantarse
        function stand() {
            if (!gameActive) return;
            
            // Mostrar carta oculta del dealer
            displayCards(dealerCards, 'dealer-cards');
            
            // Dealer debe pedir hasta 17
            while (calculateHandValue(dealerCards) < 17) {
                dealerCards.push(deck.pop());
                displayCards(dealerCards, 'dealer-cards');
            }
            
            const playerValue = calculateHandValue(playerCards);
            const dealerValue = calculateHandValue(dealerCards);
            
            document.getElementById('dealer-value').textContent = 'Valor: ' + dealerValue;
            
            // Determinar ganador
            if (dealerValue > 21) {
                endGame('¬°Dealer se pas√≥! T√∫ ganas.');
            } else if (playerValue > dealerValue) {
                endGame('¬°T√∫ ganas!');
            } else if (dealerValue > playerValue) {
                endGame('Dealer gana.');
            } else {
                endGame('¬°Empate!');
            }
        }
        
        // Doblar
        function doubleDown() {
            if (!gameActive) return;
            
            hit();
            if (gameActive) {
                stand();
            }
        }
        
        // Terminar juego
        function endGame(message) {
            gameActive = false;
            document.getElementById('game-message').textContent = message;
            
            // Desactivar botones
            document.getElementById('deal-btn').disabled = false;
            document.getElementById('hit-btn').disabled = true;
            document.getElementById('stand-btn').disabled = true;
            document.getElementById('double-btn').disabled = true;
        }
        
        // Inicializar juego
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéÆ Juego de Blackjack cargado correctamente');
            console.log('‚úÖ Todos los botones est√°n funcionando');
        });
    </script>
    
    <!-- Script para forzar deployment y verificar funcionalidad -->
    <script src="force-deploy.js"></script>
    <script>
        // Verificar deployment despu√©s de cargar
        setTimeout(() => {
            if (typeof window.verifyButtonFunctionality === 'function') {
                console.log('üîç Verificando funcionalidad de botones...');
                const allWorking = window.verifyButtonFunctionality();
                if (allWorking) {
                    console.log('‚úÖ Todos los botones est√°n funcionando correctamente');
                } else {
                    console.log('‚ùå Algunos botones no est√°n funcionando');
                }
            }
        }, 2000);
    </script>
    
    <!-- Script espec√≠fico para fixes en navegadores de escritorio -->
    <script src="desktop-fix.js"></script>
    
</body>
</html>